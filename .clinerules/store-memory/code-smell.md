
# Smells to Refactorings

- Code smell（コードの臭い）とは、「コードとしては動作しているけれども、将来的に問題を引き起こす可能性がある“設計上の兆候”」のことです
- リファクタリング（改善）の必要性を示すサインとも言えます。
- 表を参考に、書かれているコードがCode Smellに近いパターンがある場合は、リファクタリング手法を参考に修正しましょう

## Smells Within Classes

| コードの臭い (Code Smell)         | 説明                                                                 | リファクタリング手法                                                                 |
|------------------------------|----------------------------------------------------------------------|----------------------------------------------------------------------------------|
| Divergent Change             | 一つのクラスが異なる理由で複数回変更される場合。                                  | クラスを分割し、それぞれの責務に応じたクラスを作成する。                                               |
| Shotgun Surgery              | 一つの変更が複数のクラスに同時に影響を与える場合。                                | 関連する変更を一つのクラスにまとめ、機能を統合する。                                                  |
| Feature Envy                | メソッドが他のクラスのデータを過度に利用している場合。                              | メソッドを適切なクラスに移動し、データと操作を一元化する。                                            |
| Data Clumps                 | 複数のクラスで同じデータのグループが繰り返し現れる場合。                            | データのグループを新しいクラスとして抽出し、再利用性を高める。                                         |
| Primitive Obsession         | 基本データ型を過度に使用し、特定の概念を表現している場合。                          | 基本型をラップするクラスを作成し、意味を明確にする。                                                 |
| Switch Statements           | 同じ条件分岐が複数箇所で繰り返される場合。                                    | ポリモーフィズムを利用して、条件分岐をクラスの継承階層で置き換える。                                     |
| Parallel Inheritance Hierarchies | 一つのクラス階層の変更が、別のクラス階層の変更を必要とする場合。                        | クラス階層を統合し、依存関係を減らす。                                                        |
| Lazy Class                  | クラスが十分な機能や責務を持っていない場合。                                   | クラスを削除し、その機能を他のクラスに統合する。                                                  |
| Speculative Generality      | 将来のために汎用的な設計が行われたが、実際には使用されていない場合。                   | 不要な汎用性を削除し、シンプルな設計に戻す。                                                    |
| Temporary Field             | オブジェクトの一部のフィールドが特定の状況でのみ使用される場合。                      | フィールドを使用する状況に応じて、専用のクラスやメソッドに分離する。                                      |
| Message Chains              | オブジェクトが他のオブジェクトを連続的に呼び出す場合。                             | 呼び出し元と最終的なオブジェクトの間に直接的なメソッドを追加し、依存関係を減らす。                             |
| Middle Man                  | クラスが他のクラスのメソッドを単に委譲するだけの場合。                              | 不要な委譲を削除し、直接的な呼び出しを行う。                                                   |

## Smells Between Classes

| コードの臭い (Code Smell)         | 説明                                                                 | リファクタリング手法                                                                 |
|------------------------------|----------------------------------------------------------------------|----------------------------------------------------------------------------------|
| Inappropriate Intimacy       | 二つのクラスが互いの内部詳細に過度に依存している場合。                          | クラス間の結合度を下げ、適切なインターフェースを定義する。                                       |
| Incomplete Library Class     | 使用しているライブラリクラスが必要な機能を提供していない場合。                     | ライブラリクラスを拡張するか、アダプターを作成して必要な機能を追加する。                                   |

# Reference
- https://users.csc.calpoly.edu/~jdalbey/305/Lectures/SmellsToRefactorings